<!DOCTYPE html>
<html>
<head>
    <link rel="SHORTCUT ICON" href="/favicon.ico"/>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name = "format-detection" content = "telephone=no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- Original Jekyll
    <meta name="viewport" content="width=device-width">
    -->
    <title>Updating a Project To CDV 3.0</title>
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/css/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="/css/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script src="/js/smooth.pack.js" type="text/javascript"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-94271-30']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
</head>

<body>

    <div id="container">
      <div class="inner">

        <header>
          <h1>aogilvie.github.io</h1>
          <h2>GitHub website innit.</h2>
        </header>

        <!--<section id="downloads" class="clearfix">
          <a href="https://github.com/aogilvie" id="view-on-github" class="button"><span>Blog</span></a>
        </section>-->
        <section id="downloads" class="clearfix">
          <a href="https://twitter.com/allyogilvie" id="view-on-twitter" class="button"><span>Twitter</span></a>
          <a href="https://gist.github.com/aogilvie/5925131" id="view-on-cv" class="button"><span>CV</span></a>
          <a href="https://github.com/aogilvie" id="view-on-github" class="button"><span>GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
	        <h3>
<!--       <a name="in-progress-welcome-to-github-pages" class="anchor" href="#in-progress-welcome-to-github-pages"><span class="octicon octicon-link"></span></a> -->
		        Ally's github site.
		    </h3>

	        <p>Ally leads the work on iOS, Android and Windows Mobile PhoneGap plugin development to enhance HTML5 games at <a href="http://wizcorp.jp" target="_blank">Wizcorp</a>. Ally is an early adopter to PhoneGap and loves solving demanding HTML5 challenges with PhoneGap plugins. <a href="http://wizcorp.jp" target="_blank">Wizcorp</a> is a Tokyo based mobile games & middleware company that has partnered with publishers such as <a href="http://en.wikipedia.org/wiki/GREE" target="_blank">GREE</a>, <a href="http://en.wikipedia.org/wiki/Capcom" target="_blank">Capcom</a> and <a href="http://en.wikipedia.org/wiki/Take-Two_Interactive" target="_blank">Take2</a>.</p>


        <div class="site">
    <div class="meta">Posted by: <a href="https://twitter.com/allyogilvie">Ally</a></div>
    <p class="meta">04 Sep 2013</p>
    <div class="post">
    <h1 id='updating_a_project_to_cordova_30'>Updating a Project to Cordova 3.0</h1>
<hr />
<h3 id='part_1__ios'>Part 1 - iOS</h3>

<p>This is a quick tutorial on creating a Cordova 3.0 project without CLI. It might be that you are upgrading an existing bulky project or whatever. Currently if you want to use Cordova 3.0 or any CLI you have to a make new project from scratch (using CLI)…</p>

<p><img alt='image' src='/images/noo.jpg' /></p>

<p>However, this tutorial will show you how to make or update to Cordova 3.0.</p>

<p><img alt='image' src='/images/ooo.gif' /></p>

<p>Here is a quick step-by-step starting with a completely empty project (check what you need to change for your existing project). Let&#8217;s do iOS first. <strong>For Android</strong> <a href='/blog/2013/09/04/updating-a-project-to-cordova-3.0-part2.html'>see part 2</a>.</p>

<h1 id='ios'>iOS</h1>
<hr />
<ul>
<li>Create a new Xcode &#8216;empty&#8217; application project.</li>

<li>Add Cordova 3.0 framework or source code to your project. For the purpose of this tutorial, <a href='https://github.com/Wizcorp/cordova-binaries/tree/v3.0/ios/bin/Debug-iphoneos'>here&#8217;s something I made earlier</a>.</li>

<li>Add AssetsLibrary.frameworkm MobileCoreServices.framework, CoreLocation.framework</li>

<li>Add our <code>www</code> folder. (You can do this in Finder, then drab into Xcode selecting; &#8216;Create folder references…&#8217;)</li>

<li>Back in Finder add to the <code>www</code> the following files;</li>
</ul>

<p><strong>index.html</strong></p>

<p>Something like this;</p>

<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;&lt;/title&gt;
		&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;&quot; /&gt;
		&lt;meta charset=&quot;utf-8&quot;&gt;
		&lt;script type=&quot;text/javascript&quot; charset=&quot;utf-8&quot; src=&quot;cordova.js&quot;&gt;&lt;/script&gt;
		&lt;script type=&quot;text/javascript&quot;&gt;
		function onBodyLoad() {
			document.addEventListener(&quot;deviceready&quot;, onDeviceReady, false);
		}
		function onDeviceReady() {
		    alert(&quot;Awesome, Cordova is ready to rock!&quot;);
		}
		&lt;/script&gt;
	&lt;/head&gt;
	&lt;body onload=&quot;onBodyLoad()&quot;&gt;
 		&lt;p&gt;A simple index file.&lt;/p&gt;
 	&lt;/body&gt;
&lt;/html&gt;</code></pre>

<p><strong>cordova.js</strong></p>

<p>from <a href='https://github.com/apache/cordova-ios/blob/3.0.x/CordovaLib/cordova.js'>https://github.com/apache/cordova-ios/blob/3.0.x/CordovaLib/cordova.js</a></p>

<p><strong>cordova_plugins.js</strong></p>

<p><em>OPTIONAL</em> - If you have plugins, create a file that looks like;</p>

<pre><code>cordova.define(&#39;cordova/plugin_list&#39;, function(require, exports, module) {		module.exports = [
	{
	   	&quot;file&quot;: &quot;&lt;file path to your plugin.js relative to /www/&gt;&quot;,       			&quot;id&quot;: &quot;&lt;an id for your plugin e.g. jp.ally.greatPlugin&gt;&quot;,       			&quot;clobbers&quot;: [
 	 		&quot;window.greatPlugin&quot;
		]
	}]
});</code></pre>

<p>Back into Xcode. Create a <strong>MainViewController</strong> class and add the following;</p>

<p><strong>MainViewController.h</strong></p>

<pre><code>#import &lt;Cordova/CDVViewController.h&gt;
#import &lt;Cordova/CDVCommandDelegateImpl.h&gt;
#import &lt;Cordova/CDVCommandQueue.h&gt;

@interface MainViewController : CDVViewController
@end

@interface MainCommandDelegate : CDVCommandDelegateImpl
@end

@interface MainCommandQueue : CDVCommandQueue
@end</code></pre>

<p><strong>MainViewController.m</strong></p>

<pre><code>#import &quot;MainViewController.h&quot;

@implementation MainViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (id)init {
    self = [super init];
    if (self) {
    }
    return self;
}

#pragma mark View lifecycle

- (void)viewWillAppear:(BOOL)animated {
	[super viewWillAppear:animated];
}

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (void)viewDidUnload {
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
	return [super shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

#pragma mark UIWebDelegate implementation

- (void)webViewDidFinishLoad:(UIWebView *)theWebView {
    // Black base color for background matches the native apps
    theWebView.backgroundColor = [UIColor blackColor];
    return [super webViewDidFinishLoad:theWebView];
}

@end

@implementation MainCommandDelegate

#pragma mark CDVCommandDelegate implementation

- (id)getCommandInstance:(NSString *)className {
    return [super getCommandInstance:className];
}

- (BOOL)execute:(CDVInvokedUrlCommand *)command {
    return [super execute:command];
}

- (NSString *)pathForResource:(NSString *)resourcepath {
    return [super pathForResource:resourcepath];
}

@end

@implementation MainCommandQueue

- (BOOL)execute:(CDVInvokedUrlCommand *)command {
    return [super execute:command];
}

@end</code></pre>

<p><strong>MainViewController.xib</strong></p>

<p>In Xcode, File &gt; New &gt; File … Select &#8216;User Interface&#8217;, then View file. Name it <strong>MainViewController</strong></p>

<p>Now modify the default <strong>AppDelegate</strong> class</p>

<p><strong>AppDelegate.h</strong></p>

<p>Add / modify the following;</p>

<pre><code>#import &lt;Cordova/CDVViewController.h&gt;

@interface AppDelegate : NSObject &lt;UIApplicationDelegate&gt;{}

@property (nonatomic, strong) IBOutlet UIWindow* window;
@property (nonatomic, strong) IBOutlet CDVViewController* viewController;

@end</code></pre>

<p><strong>AppDelegate.m</strong></p>

<p>Add / modify the following;</p>

<pre><code>#import &quot;MainViewController.h&quot;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    CGRect screenBounds = [[UIScreen mainScreen] bounds];
    
    self.window = [[UIWindow alloc] initWithFrame:screenBounds];
    self.window.autoresizesSubviews = YES;
    
    self.viewController = [[MainViewController alloc] init];
    self.viewController.wwwFolderName = @&quot;www&quot;;
    self.viewController.startPage = @&quot;index.html&quot;;
    
    // NOTE: To customize the view&#39;s frame size (which defaults to full screen), override
    // [self.viewController viewWillAppear:] in your view controller.
    
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    
    return YES;
}</code></pre>

<p><strong>config.xml</strong></p>

<p>Finally add your config.xml, here is a sample;</p>

<pre><code>&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;
&lt;widget id=&quot;io.cordova.helloCordova&quot; version=&quot;1.0.0&quot; xmlns=&quot;http://www.w3.org/ns/widgets&quot;&gt;
	&lt;name&gt;Hello Cordova&lt;/name&gt;
	&lt;description&gt;
	A sample Apache Cordova application that responds to the deviceready event.
	&lt;/description&gt;
	&lt;author email=&quot;dev@cordova.apache.org&quot; href=&quot;http://cordova.io&quot;&gt;
    Apache Cordova Team
	&lt;/author&gt;
	&lt;content src=&quot;index.html&quot; /&gt;
	&lt;feature name=&quot;LocalStorage&quot;&gt;
    	&lt;param name=&quot;ios-package&quot; value=&quot;CDVLocalStorage&quot; /&gt;
    &lt;/feature&gt;
	&lt;access origin=&quot;*&quot; /&gt;
	&lt;preference name=&quot;KeyboardDisplayRequiresUserAction&quot; value=&quot;true&quot; /&gt;
	&lt;preference name=&quot;SuppressesIncrementalRendering&quot; value=&quot;false&quot; /&gt;
	&lt;preference name=&quot;UIWebViewBounce&quot; value=&quot;true&quot; /&gt;
	&lt;preference name=&quot;TopActivityIndicator&quot; value=&quot;gray&quot; /&gt;
	&lt;preference name=&quot;EnableLocation&quot; value=&quot;false&quot; /&gt;
	&lt;preference name=&quot;EnableViewportScale&quot; value=&quot;false&quot; /&gt;
	&lt;preference name=&quot;AutoHideSplashScreen&quot; value=&quot;true&quot; /&gt;
	&lt;preference name=&quot;ShowSplashScreenSpinner&quot; value=&quot;true&quot; /&gt;
	&lt;preference name=&quot;MediaPlaybackRequiresUserAction&quot; value=&quot;false&quot; /&gt;
	&lt;preference name=&quot;AllowInlineMediaPlayback&quot; value=&quot;false&quot; /&gt;
	&lt;preference name=&quot;OpenAllWhitelistURLsInWebView&quot; value=&quot;false&quot; /&gt;
	&lt;preference name=&quot;BackupWebStorage&quot; value=&quot;cloud&quot; /&gt;
	&lt;preference name=&quot;fullscreen&quot; value=&quot;true&quot; /&gt;
	&lt;preference name=&quot;webviewbounce&quot; value=&quot;true&quot; /&gt;
&lt;/widget&gt;</code></pre>

<p><em>OPTIONAL</em> - If you have plugins add to the config.xml inside the <code>&lt;widget&gt;</code> tag (just aobve <code>&lt;access origin=&quot;*&quot; /&gt;</code> is fine):</p>

<p>(Below assumes the plugin class is GreatPlugin.m and your Cordova.exec will call &#8220;GreatPlugin&#8221;)</p>

<pre><code>&lt;feature name=&quot;GreatPlugin&quot;&gt;
    &lt;param name=&quot;ios-package&quot; value=&quot;GreatPlugin&quot; /&gt;
    &lt;param name=&quot;onload&quot; value=&quot;true&quot; /&gt;
&lt;/feature&gt;</code></pre>

<h2 id='part_2__android'>Part 2 - Android</h2>

<p><a href='/blog/2013/09/04/updating-a-project-to-cordova-3.0-part2.html'>see part 2</a></p>

<h1 id='troubleshooting'>Troubleshooting</h1>
<hr />
<h4 id='_loaded_the_mainviewcontroller_nib_but_the_view_outlet_was_not_set'><code>-[UIViewController _loadViewFromNibNamed:bundle:]</code> loaded the &#8220;MainViewController&#8221; nib but the view outlet was not set.</h4>

<p>Click on <strong>MainViewController.xib</strong>, click File&#8217;s Owner, press cmd+option+3, check that the Class is &#8220;MainViewController&#8221;.</p>

<p>Press cmd+option+6, click and drag from &#8220;view&#8221; to the left hand column to select &#8220;View&#8221;.</p>
    </div>
</div>


    <!-- 

<hr/>
<div id="footer">
    <p>Copyright © company name here.</p>
    <a class="closing" href="#top"></a>
</div>
-->
		</section>
		<footer>
		This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
		</footer>
		
		<script type="text/javascript">
			var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		</script>
		<script type="text/javascript">
			try {
			var pageTracker = _gat._getTracker("UA-42222378-1");
			pageTracker._trackPageview();
			} catch(err) {}
		</script>


</body>
</html>
